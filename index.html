<!DOCTYPE html>
<html lang="en">
<head>    
    <!-- Basic setup and title -->    
    <meta charset="UTF-8">    
    <meta name="viewport" content="width=device-width, initial-scale=1.0">    
    <title>Human Time System (HTS) Converters</title>

    <!-- PWA Setup: Link to the Manifest (CRITICAL for PWA recognition) -->    
    <link rel="manifest" href="manifest.json">

    <!-- PWA Meta Tags (Theme, Apple) -->    
    <meta name="theme-color" content="#4f46e5">    
    
    <!-- === PWA ICON LINKS (CRITICAL DESKTOP FIX) === -->
    <!-- Define standard favicon (32x32) -->
    <link rel="icon" type="image/png" href="1000035855.png" sizes="32x32">
    <!-- Define Apple Touch Icon (used by iOS and sometimes desktop installers) -->
    <link rel="apple-touch-icon" href="1000035855.png">     
    <!-- Explicitly defining high-resolution icons for desktop installation -->
    <link rel="icon" type="image/png" href="1000035855.png" sizes="192x192">
    <link rel="icon" type="image/png" href="1000035855.png" sizes="512x512">
    <!-- Using the user's high-resolution asset to ensure sharp display on large screens -->
    <link rel="icon" type="image/png" href="1000035855.png" sizes="1866x1866">
    
    <meta name="apple-mobile-web-app-capable" content="yes">    
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">    
    <meta name="apple-mobile-web-app-title" content="HTS Tool">    

    <style>                
        * {            
            box-sizing: border-box;        
        }

        body {                        
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;                        
            display: flex;                        
            flex-direction: column;                        
            align-items: center;                        
            padding: 0;                        
            background-color: #f0f2f5;                
        }        
        
        /* === Custom Splash Screen Styles (With Image) === */        
        #custom-splash {            
            position: fixed;            
            top: 0;            
            left: 0;            
            width: 100vw;             
            height: 100vh;            
            display: flex;            
            flex-direction: column;            
            justify-content: center;            
            align-items: center;            
            background-color: #007bff; /* Matching manifest theme_color */            
            z-index: 9999;            
            color: white;            
            transition: opacity 0.3s ease-out;            
            text-align: center;        
        }                
        /* Style for the image on the splash screen - NOW CIRCULAR */        
        .splash-logo-image {            
            width: 250px;             
            height: 250px;
            /* Use 'cover' to ensure the photo fills the circle without distortion */
            object-fit: cover; 
            margin-bottom: 20px;
            /* CRITICAL FIX: border-radius 50% makes it a circle */
            border-radius: 50%; 
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.4);
            border: 5px solid white; /* Add a nice white border for contrast */
        }

        /* Style for the main text on the splash screen */        
        .splash-caption {            
            font-size: 2.2em; 
            font-weight: 700;            
            color: white;            
            padding: 0 20px;            
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);            
            margin-bottom: 5px;        
        }

        #custom-splash p {            
            margin-top: 10px;            
            font-size: 1.4em;       
        }        
        /* === END Splash Screen Styles === */

        /* Main app content wrapper to handle spacing from the top */        
        #app-content {            
            padding: 20px 0;            
            width: 100%;        
        }                
        
        /* === Centering Fix: Apply margin: auto to containers with fixed max-width === */        
        .container {                        
            background-color: #ffffff;                        
            padding: 40px 20px;            
            border-radius: 12px;                        
            box-shadow: 0 6px 15px rgba(0, 0, 0, 0.1);                        
            width: 90%;                        
            max-width: 450px;            
            margin: 0 auto 30px auto;            
            text-align: center;        
        }                
        
        /* Logo Styling */                
        .logo-container {                        
            margin-bottom: 25px;                
        }                
        .logo-container img {                        
            max-width: 180px;                         
            height: auto;                        
            display: block;                        
            margin: 0 auto;                
        }                
        h1 {                        
            color: #1a1a2e;                        
            font-size: 1.5em;                        
            margin-bottom: 30px;                
        }                
        h2 {                        
            color: #1a1a2e;                        
            font-size: 1.3em;                        
            margin-top: 0;                        
            margin-bottom: 25px;                
        }                
        label {                        
            display: block;                        
            margin-top: 20px;                        
            margin-bottom: 8px;                        
            font-weight: 600;                        
            color: #333;                        
            text-align: left;                
        }                
        input {                        
            width: 100%;                        
            padding: 12px;                        
            box-sizing: border-box;                        
            border: 2px solid #ccc;                        
            border-radius: 6px;                        
            font-size: 1em;                        
            transition: border-color 0.3s;                
        }                
        input:focus {                        
            border-color: #007bff;                        
            outline: none;                
        }        
        button {                        
            background-color: #007bff;                        
            color: white;                        
            padding: 12px 25px;                        
            margin-top: 30px;                        
            border: none;                        
            cursor: pointer;                        
            border-radius: 6px;                        
            font-size: 1em;                        
            font-weight: 700;                        
            transition: background-color 0.3s, transform 0.1s;                
        }                
        button:hover {                        
            background-color: #0056b3;                
        }                
        button:active {                        
            transform: scale(0.99);                
        }        
        /* Styling for Result Boxes */                
        #result-convert, #result-difference, #result-project, #result-hts-convert, #result-past {                        
            margin-top: 35px;                        
            padding: 20px;                        
            border: 1px solid #ddd;                        
            border-radius: 8px;                        
            background-color: #e6f7ff;                        
            font-size: 1.1em;                        
            color: #1a1a2e;                        
            font-weight: bold;                
        }                
        .warning-text {                        
            color: #ff4500;                        
            font-weight: 600;                        
            font-size: 0.95em;                
        }                
        /* Footer/New Logo Styling */                
        footer {                        
            margin: 40px auto 40px auto;            
            padding-top: 20px;                        
            border-top: 1px solid #ccc;                        
            width: 90%;                        
            max-width: 450px;                        
            text-align: center;                
        }                
        .storcke-logo img {                        
            max-width: 150px;                        
            height: auto;                        
            opacity: 0.7;                
        }                
        .footer-text {                        
            color: #666;                        
            font-size: 0.8em;                        
            margin-top: 10px;                
        }        
        /* Footer link for documentation */
        .footer-link {
            font-size: 0.9em;
            margin-top: 15px;
            display: block;
            color: #007bff;
            text-decoration: none;
            font-weight: 600;
        }
        .footer-link:hover {
            text-decoration: underline;
        }
        
        /* Style for the main content block that starts hidden */        
        .hidden {            
            display: none !important;        
        }        

        /* Style for the logo error message in the main content */
        #logo-status {
            color: #ff4500; /* Red warning text */
            margin-top: 10px;
            font-weight: bold;
            padding: 10px;
            background: #ffe0e0; /* Light red background */
            border-radius: 8px;
            border: 1px solid #ff4500;
        }
    </style>
</head>
<body>

<!-- === Custom Splash Screen (4-Second Delay) - NOW WITH CIRCULAR IMAGE FIX === -->
<div id="custom-splash">    
    <!-- MANDATORY: Daughter's Photo set to the user-provided filename -->
    <img         
        id="daughter-photo"         
        src="daughter_photo.png"
        alt="Daughter's Photo"         
        class="splash-logo-image"
        onerror="handleLogoError(this, 'daughter_photo.png');" 
    >
    <p class="splash-caption">Welcome to the Storcke HTS Tool</p>    
    <p>Loading Human Time System Converter...</p>
</div>
<!-- === END Splash Screen === -->

<!-- Wrap all application content in this div and hide it initially -->
<div id="app-content" class="hidden">    
    
    <!-- CONVERTER 1: Gregorian to HTS -->    
    <div class="container">            
        <div class="logo-container" id="main-logo-container">                    
            <!-- Main HTS Logo (Displayed in content) - Error handler shows notice if missing -->                    
            <img 
                id="main-content-logo" 
                src="1000035855.png" 
                alt="Human Time System Logo"
                onerror="handleLogoError(this, '1000035855.png');" 
            >
            <!-- Error status div will be inserted here by JS if image fails -->
        </div>        
        <h1>Gregorian Year to HTS Converter</h1>
        <label for="gregorianYear">Enter Gregorian Year (AD):</label>            
        <input type="number" id="gregorianYear" placeholder="e.g., 2025" onkeyup="if(event.key === 'Enter') convertToHTS()">        
        <button onclick="convertToHTS()">Calculate HTS Year</button>
        <div id="result-convert">                    
            The current year will be displayed here on load.            
        </div>    
    </div>    

    <!-- NEW FEATURE: Live Time and HTS Display -->
    <div class="container" id="live-hts-container">
        <h2>Current Date & HTS Year (Live)</h2>
        <div id="live-gregorian-time" style="font-size: 2.2em; color: #007bff; font-weight: 800; margin-bottom: 5px;">
            --:--:--
        </div>
        <div id="live-gregorian-date" style="font-size: 1.1em; color: #666; margin-bottom: 15px;">
            ---
        </div>
        <p style="font-weight: 600; color: #333;">Current HTS Year:</p>
        <div id="live-hts-year" style="font-size: 2.5em; color: #1a1a2e; font-weight: 800; margin-top: 10px;">
            --B-----
        </div>
        <p style="font-size: 0.8em; color: #999; margin-top: 15px;">Updates every second based on your local system time.</p>
    </div>
    <!-- END LIVE FEATURE -->

    <!-- NEW FEATURE: Verify Past HTS Year -->
    <div class="container">            
        <h2>Verify Past HTS Year</h2>
        <p>Calculate the HTS Year for a date a specified number of years before today's date.</p>
        <label for="yearsAgo">Years Before Today's Date:</label>            
        <input type="number" id="yearsAgo" placeholder="e.g., 6500" onkeyup="if(event.key === 'Enter') verifyPastYear()">        
        <button onclick="verifyPastYear()">Calculate Past HTS
